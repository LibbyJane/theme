.header__utility {
    --header-icon-alpha: 0.025;

    display: flex;
    justify-self: end;
    padding: 0;
    position: relative;
    z-index: 1;

    &:hover,
    &:focus {
        --header-icon-alpha: 0.01;
    }

    &::before,
    &::after {
        content: '';
        position: absolute;
        inset: 0;
        z-index: 0;
    }

    &::before {
        --shadow-alpha: 0.03;
        --mask:
            radial-gradient(4.14px at 50% 5.85px,#000 99%,#0000 101%) calc(50% - 6px) 0/12px 51% repeat-x,
            radial-gradient(4.14px at 50% -2.85px,#0000 99%,#000 101%) 50% 3px/12px calc(51% - 3px) repeat-x,
            radial-gradient(4.14px at 50% calc(100% - 5.85px),#000 99%,#0000 101%) calc(50% - 6px) 100%/12px 51% repeat-x,
            radial-gradient(4.14px at 50% calc(100% + 2.85px),#0000 99%,#000 101%) 50% calc(100% - 3px)/12px calc(51% - 3px) repeat-x;

        background-color: rgb(var(--color-background));
        background-image:
            linear-gradient(to bottom, rgba(var(--color-shadow),var(--shadow-alpha)) 5%, rgba(var(--color-shadow),0) 50%),
            // linear-gradient(to right,  rgba(242,246,248,1) 0%,rgba(216,225,231,1) 50%,rgba(181,198,208,1) 51%,rgba(216,225,231,1) 75%,rgba(181,198,208,1) 76%,rgba(224,239,249,1) 100%)
            ;
        background-blend-mode: multiply;
        border-radius: 2px;
        mask: var(--mask);
    }

    &::after {
        background: radial-gradient(ellipse at center, rgba(var(--color-shadow), 0.1) 0%, rgba(var(--color-shadow), 0) 73%);
        background-size: contain;
        //box-shadow: 0 5px 18px rgba(var(--color-shadow),0.3), 12px 6px 2px 0px rgba(var(--color-shadow),0.5);
        top: auto;
        height: calc(var(--space) * 3);
        margin-top: var(--space);
        margin-bottom: calc(var(--space) * -1);
        z-index: -1;
    }

    &:focus-within {
        &::after {

        }
    }
}

.header__search {
    display: inline-flex;
    line-height: 0;
}

.header__icon {
    background-image: linear-gradient(to right, rgba(var(--color-shadow),var(--header-icon-alpha)) 0%,rgba(var(--color-shadow),0) 40%);
    // border-left: 2px dotted rgba(var(--color-foreground),0.2);
    color: rgb(var(--color-foreground));
    display: inline-flex;
        align-items: center;
        justify-content: center;
    min-height: 4rem;
    width: 4.6rem;
    mix-blend-mode: multiply;
    padding: var(--space-lg) var(--space);
    position: relative;
    transition: all var(--duration-short) var(--transition-type);
}

// .header__icon--cart {
//     position: relative;
//     &.has-items {
//         // color: rgba(var(--ecommerce-color), 0.8);

//         &:hover,
//         &:focus {
//             svg {
//                 // color: rgb(var(--ecommerce-color));
//             }
//         }
//     }

//     svg {
//         width: 100%;
//         height: auto;
//     }
// }

.cart-count-bubble {
    // background-color: rgb(var(--ecommerce-color));
    // color: rgb(var(--ecommerce-contrast-color));
    background-color: rgb(var(--color-button));
    color: rgb(var(--color-button-text));
    border-radius: 99em;
    box-shadow: 0 2px 4px rgba(var(--color-shadow),0.3);
    display: flex;
        align-items: baseline;
        justify-content: center;
    font-size: 0.9rem;
    line-height: 1;
    min-width: 1.7rem;
    padding: var(--space-sm);
    outline: 2px solid rgba(var(--ecommerce-contrast-color), 0.8);
    position: absolute;
        bottom: 0;
        right: 0;

    &:empty {
        display: none;
    }
}

.localisation-form {
    margin: 0 var(--space);
}

// .desktop-localization-wrapper {
//     display: flex;
//         flex-wrap: wrap;
//         justify-content: flex-end;
// }

// .localisation-form {
//     flex-direction: column;

//     &:only-child {
//         display: inline-flex;
//             flex-wrap: wrap;
//         margin: 0;
//         padding: 0;

//         @include breakpoint(medium) {
//             justify-content: start;
//             width: auto;
//         }
//     }
// }