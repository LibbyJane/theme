:root {
    /* todo */
    //--card-drop-shadow: 0 10px 4px rgba(var(--color-shadow), 0.2);

    // --product-card-padding: {{ settings.card_padding | divided_by: 10.0 }}rem;
    // collection_card_image_padding
    // --product-card-corner-radius: {{ settings.card_corner_radius | divided_by: 10.0 }}rem;
    // --product-card-text-alignment: {{ settings.card_text_alignment }};
    // --product-card-border-width: {{ settings.card_border_thickness | divided_by: 10.0 }}rem;
    // --product-card-border-opacity: {{ settings.card_border_opacity | divided_by: 100.0 }};
    // --product-card-shadow-opacity: {{ settings.card_shadow_opacity | divided_by: 100.0 }};
    // --product-card-shadow-visible: {% if settings.card_shadow_opacity > 0 %}1{% else %}0{% endif %};
    // --product-card-shadow-horizontal-offset: {{ settings.card_shadow_horizontal_offset | divided_by: 10.0 }}rem;
    // --product-card-shadow-vertical-offset: {{ settings.card_shadow_vertical_offset | divided_by: 10.0 }}rem;
    // --product-card-shadow-blur-radius: {{ settings.card_shadow_blur | divided_by: 10.0 }}rem;
    // box-shadow: var(--media-shadow-horizontal-offset) var(--media-shadow-vertical-offset) var(--media-shadow-blur-radius)
    // rgba(var(--color-shadow), var(--media-shadow-opacity));
}

.card {
    /* todo */
    box-shadow: inset 0 -2px 10px 0 rgba(var(--color-shadow),0.15), 0 10px 4px rgba(var(--color-shadow), 0.2);
    background: rgba(var(--color-background),1);
    color: inherit;
    display: flex;
    flex-direction: column;
    height: 100%;
    padding: var(--card-padding);
    position: relative;
    text-decoration: none;
    text-align: var(--text-alignment);
    transition: all 300ms ease;
    transform: rotate(-0.5deg);
    z-index: 1;

    &.card {
        .grid__item & {
            &:hover,
            &:focus {
                transform: rotate(0) translateY(-3px) translateX(0);

                .card__media-hover-image {
                    opacity: 1;
                }
            }
        }
    }

    // +.card__media {
        // box-shadow: var(--card-drop-shadow);
        // opacity: 0;
        // pointer-events: none;
        // position: absolute;
        //     top: 0;
        //     left: 0;

        // transform: translateY(-3px) rotate(-15deg);
        // transition: all 1s ease-in-out;
        // transform-style: preserve-3d;
        // transition-delay: 0.5s;
        // transform-origin: top left;
        // z-index: -1;
    // }

    .grid__item:nth-child(2) & {
        transform: rotate(-1deg) translateX(-2px);
    }

    .grid__item:nth-child(3) & {
        transform: rotate(1deg) translateY(-2px);
    }

    .grid__item:nth-child(6) & {
        transform: rotate(0.25deg) translateY(2px);
    }
}

.card__media {
    background: rgba(var(--color-background),1);
    border-radius: calc(var(--border-radius) - var(--border-width) - var(--image-padding));
    display: grid;
        grid-template-areas: "image";
        align-items: center;
        justify-content: center;
    height: 0;
    overflow: hidden;
    padding: 0;
    padding-top: var(--ratio-percent);
    position: relative;

    &[class^='shape-'], &[class*=' shape-'] {
        height: auto;
        padding-top: 0;

        img {
            grid-area: image;
            position: relative;
            height: fit-content;
            min-height: 100%;
            max-width: none;
        }
    }

    img {
        display: block;
        height: auto;
        width: auto;
        max-width: 100%;
        position: absolute;
            inset: 0;
        margin: auto;
    }
}

.card__media--portrait {
    img {
        margin-top: 0;
    }
}

.card__media-hover-image {
    opacity: 0;
    // todo
    transition: all 0.3s ease-in-out;
    transition-delay: 0.25s;
}

.card__content {
    padding: var(--product-card-padding);
}

.card-information {
    text-align: var(--text-alignment);
}

// @keyframes switch {
//     0% {
//         opacity: 0;
//         transform: translateX(-20%) rotate(-45deg);
//     }

//     10% {
//         opacity: 1;
//     }

//     100% {
//         transform: translateX(0%) rotate(0deg);
//     }
// }
// .card:not(.ratio) {

// }

// .card.card--horizontal {
//   --text-alignment: left;
//   --image-padding: 0rem;
//   flex-direction: row;
//   align-items: flex-start;
//   gap: 1.5rem;
// }

// .card--horizontal.ratio:before {
//   padding-bottom: 0;
// }

// .card--card.card--horizontal {
//   padding: 1.2rem;
// }

// .card--card.card--horizontal.card--text {
//   column-gap: 0;
// }

// .card--card {
//   height: 100%;
// }

// .card--card,
// .card--standard .card__inner {
//   position: relative;
//   box-sizing: border-box;
//   border-radius: var(--border-radius);
//   border: var(--border-width) solid rgba(var(--color-foreground), var(--border-opacity));
// }

// .card--card:after,
// .card--standard .card__inner:after {
//   content: '';
//   position: absolute;
//   z-index: -1;
//   width: calc(var(--border-width) * 2 + 100%);
//   height: calc(var(--border-width) * 2 + 100%);
//   top: calc(var(--border-width) * -1);
//   left: calc(var(--border-width) * -1);
//   border-radius: var(--border-radius);
//   box-shadow: var(--shadow-horizontal-offset) var(--shadow-vertical-offset) var(--shadow-blur-radius) rgba(var(--color-shadow), var(--shadow-opacity));
// }

// /* Needed for gradient continuity with or without animation, the transform scopes the gradient to its container which happens already when animation are turned on */
// .card--card.gradient,
// .card__inner.gradient {
//   transform: perspective(0);
// }

// /* Needed for gradient continuity with or without animation so that transparent PNG images come up as we would expect */
// .card__inner.color-background-1 {
//   background: transparent;
// }

// .card .card__inner .card__media {


// .card--card .card__inner .card__media {
//   border-bottom-right-radius: 0;
//   border-bottom-left-radius: 0;
// }

// .card--standard.card--text {
//   background-color: transparent;
// }



// .card__media,
// .card .media {
//   bottom: 0;
//   position: absolute;
//   top: 0;
// }

// .card .media {
//   width: 100%;
// }

// .card__media {
//   margin: var(--image-padding);
//   width: calc(100% - 2 * var(--image-padding));
// }

// .card--standard .card__media {
//   margin: var(--image-padding);
// }
// /*
// .card__inner {
//     clip-path: polygon(
//         0 0,
//         0.66% 3%,
//         0.5% 4%,
//         0 9%,
//         0.85% 12%,
//         0.75% 18%,
//         0 21%,
//         0.75% 22%,
//         0 25%,
//         0.75% 31%,
//         0 36%,
//         0.75% 39%,
//         0.66% 41%,
//         0.75% 44%,
//         0 49%,
//         0.85% 52%,
//         0.75% 55%,
//         0 66%,
//         0.85% 68%,
//         0.75% 74%,
//         0 76%,
//         0.75% 79%,
//         0 81%,
//         0.75% 85%,
//         0 90%,
//         0.75% 95%,
//         0 100%,
//         1.12% 99.75%,
//         0.75% 99.5%,
//         2% 100%,
//         5% 99.6%,
//         6% 100%,
//         10.12% 99.5%,
//         15.75% 99.6%,
//         20% 100%,
//         25% 99.5%,
//         36% 100%,
//         45% 99.9%,
//         56% 100%,
//         60.12% 99.85%,
//         65.75% 99.93%,
//         70% 100%,
//         75% 99.94%,
//         86% 100%,
//         100% 100%, 100% 100%, 100% 0%);
//      box-shadow: 2px 2px 2px black;
//   width: 100%;
// }
// /*
// .grid__item:nth-child(even) .card__inner {
//       clip-path: polygon(100% 1%, 99% 5%, 100% 9%, 99% 14%, 100% 19%, 99% 24%, 100% 29%, 99% 34%, 99% 41%, 99% 43%, 99% 50%, 99% 55%, 100% 100%, 0 100%, 0 0);
//   } */

// .card--media .card__inner .card__content {
//   position: relative;
//   padding: calc(var(--image-padding) + 1rem);
// }

// .card__content {
//   display: grid;
//   grid-template-rows: minmax(0, 1fr) max-content minmax(0, 1fr);
//   padding: 1rem;
//   width: 100%;
//   flex-grow: 1;
// }

// .card__content--auto-margins {
//   grid-template-rows: minmax(0, auto) max-content minmax(0, auto);
// }

// .card__information {
//   grid-row-start: 2;
//   padding: 1.3rem 1rem;
// }

// .card:not(.ratio)>.card__content {
//   grid-template-rows: max-content minmax(0, 1fr) max-content auto;
// }

// .card-information .card__information-volume-pricing-note {
//   margin-top: 0.6rem;
//   line-height: calc(0.5 + .4 / var(--font-body-scale));
//   color: rgba(var(--color-foreground), 0.75);
// }

// @media screen and (min-width: 750px) {
//   .card__information {
//     padding-bottom: 1.7rem;
//     padding-top: 1.7rem;
//   }
// }

// .card__badge {
//   align-self: flex-end;
//   grid-row-start: 3;
//   justify-self: flex-start;
// }

// .card__badge.top {
//   align-self: flex-start;
//   grid-row-start: 1;
// }

// .card__badge.right {
//   justify-self: flex-end;
// }

// .card:not(.card--horizontal)>.card__content>.card__badge {
//   margin: 1.3rem;
// }

// .card__media .media img {
//   height: 100%;
//   object-fit: cover;
//   object-position: center center;
//   width: 100%;
// }

// .card__inner:not(.ratio)>.card__content {
//   height: 100%;
// }

// .card__heading {
//   margin-top: 0;
//   margin-bottom: 0;
// }

// .card__heading:last-child {
//   margin-bottom: 0;
// }

// .card--horizontal .card__heading,
// .card--horizontal .price__container .price-item,
// .card--horizontal__quick-add {
//   font-size: calc(var(--font-heading-scale) * 1.2rem);
// }

// .card--horizontal .card-information>*:not(.visually-hidden:first-child)+*:not(.rating):not(.card__information-volume-pricing-note) {
//   margin-top: 0;
// }

// .card--horizontal__quick-add:before {
//   box-shadow: none;
// }

// @media only screen and (min-width: 750px) {

//   .card--horizontal .card__heading,
//   .card--horizontal .price__container .price-item,
//   .card--horizontal__quick-add {
//     font-size: calc(var(--font-heading-scale) * 1.3rem);
//   }
// }

// .card--card.card--media>.card__content {
//   margin-top: calc(0rem - var(--image-padding));
// }

// .card--standard.card--text a::after,
// .card--card .card__heading a::after {
//   bottom: calc(var(--border-width) * -1);
//   left: calc(var(--border-width) * -1);
//   right: calc(var(--border-width) * -1);
//   top: calc(var(--border-width) * -1);
// }

// .card__heading a::after {
//   bottom: 0;
//   content: '';
//   left: 0;
//   position: absolute;
//   right: 0;
//   top: 0;
//   z-index: 1;
// }

// .card__heading a:after {
//   outline-offset: 0.3rem;
// }

// .card__heading a:focus:after {
//   box-shadow: 0 0 0 0.3rem rgb(var(--color-background)), 0 0 0.5rem 0.4rem rgba(var(--color-foreground), 0.3);
//   outline: 0.2rem solid rgba(var(--color-foreground), 0.5);
// }

// .card__heading a:focus-visible:after {
//   box-shadow: 0 0 0 0.3rem rgb(var(--color-background)), 0 0 0.5rem 0.4rem rgba(var(--color-foreground), 0.3);
//   outline: 0.2rem solid rgba(var(--color-foreground), 0.5);
// }

// .card__heading a:focus:not(:focus-visible):after {
//   box-shadow: none;
//   outline: 0;
// }

// .card__heading a:focus {
//   box-shadow: none;
//   outline: 0;
// }

// @media screen and (min-width: 990px) {

//   .card .media.media--hover-effect>img:only-child,
//   .card-wrapper .media.media--hover-effect>img:only-child {
//     transition: transform var(--duration-long) ease;
//   }


// /*
//   .card:hover .media.media--hover-effect>img:first-child:only-child,
//   .card-wrapper:hover .media.media--hover-effect>img:first-child:only-child {
//     transform: scale(1.03);
//   } */

//   .card-wrapper:hover .media.media--hover-effect>img:first-child:not(:only-child) {
//     z-index: -1;
//   }

//   .card-wrapper:hover .media.media--hover-effect>img+img {
//     opacity: 1;
//         z-index: 1;
//     transition: transform var(--duration-long) ease;
//   }

//   /* .underline-links-hover:hover a {
//     text-decoration: underline;
//     text-underline-offset: 0.3rem;
//   } */
// }

// .card--standard.card--media .card__inner .card__information,
// .card--standard.card--text:not(.card--horizontal)>.card__content .card__heading:not(.card__heading--placeholder),
// .card--standard:not(.card--horizontal)>.card__content .card__badge,
// .card--standard.card--text.article-card>.card__content .card__information,
// .card--standard>.card__content .card__caption {
//   display: none;
// }

// .card--standard:not(.card--horizontal) .placeholder-svg {
//   height: auto;
//   width: 100%;
// }

// .card--standard>.card__content {
//   padding: 0;
// }

// .card--standard>.card__content .card__information {
//   padding-left: 0;
//   padding-right: 0;
// }

// .card--card.card--media .card__inner .card__information,
// .card--card.card--text .card__inner,
// .card--card.card--media>.card__content .card__badge {
//   display: none;
// }

// .card--horizontal .card__badge,
// .card--horizontal.card--text .card__inner {
//   display: none;
// }

// .card--extend-height {
//   height: 100%;
// }

// .card--extend-height.card--standard.card--text,
// .card--extend-height.card--media {
//   display: flex;
//   flex-direction: column;
// }

// .card--extend-height.card--standard.card--text .card__inner,
// .card--extend-height.card--media .card__inner {
//   flex-grow: 1;
// }

// .card .icon-wrap {
//   margin-left: 0.8rem;
//   white-space: nowrap;
//   transition: transform var(--duration-short) ease;
//   overflow: hidden;
// }

// .card-information>*+* {
//   margin-top: 0.5rem;
// }

// .card-information {
//   width: 100%;
// }

// .card-information>* {
//   line-height: calc(1 + 0.4 / var(--font-body-scale));
//   color: rgb(var(--color-foreground));
// }

// .card-information>.price {
//   color: rgb(var(--color-foreground));
// }

// .card--horizontal .card-information>.price {
//   color: rgba(var(--color-foreground), 0.75);
// }

// .card-information>.rating {
//   margin-top: 0.4rem;
// }

// .card-information>*:not(.visually-hidden:first-child)+*:not(.rating):not(.card__information-volume-pricing-note) {
//   margin-top: 0.7rem;
// }

// .card-information .caption {
//   letter-spacing: 0.07rem;
// }

// .card-article-info {
//   margin-top: 1rem;
// }

// /* Card Shapes */

// .card--shape .card__content {
//   padding-top: 0;
// }

// .card--shape.card--standard:not(.card--text) .card__inner {
//   border: 0;
//   /* Border is not currently compatible with image shapes for standard cards. */
//   background-color: transparent;
//   filter: drop-shadow(var(--shadow-horizontal-offset) var(--shadow-vertical-offset) var(--shadow-blur-radius) rgba(var(--color-shadow), var(--shadow-opacity)));
// }

// .card--shape.card--standard:not(.card--text) .card__inner:after {
//   display: none;
// }

.grid__item:nth-child(2n) .shape--blob {
  clip-path: polygon(var(--shape--blob-2));
}

.grid__item:nth-child(3n) .shape--blob {
  clip-path: polygon(var(--shape--blob-3));
}

.grid__item:nth-child(4n) .shape--blob {
  clip-path: polygon(var(--shape--blob-4));
}

.grid__item:nth-child(5n) .shape--blob {
  clip-path: polygon(var(--shape--blob-5));
}

.grid__item:nth-child(7n) .shape--blob {
  clip-path: polygon(var(--shape--blob-6));
}

.grid__item:nth-child(8n) .shape--blob {
  clip-path: polygon(var(--shape--blob-1));
}

/* Card Shape Hover Rules */

@media (prefers-reduced-motion: no-preference) {
  .product-card-wrapper .shape--round {
    transition: clip-path var(--duration-long) ease;
  }

  .product-card-wrapper:hover .shape--round {
    clip-path: ellipse(47% 47% at 50% 50%);
  }

  .product-card-wrapper .shape--blob {
    transition: clip-path var(--duration-long) ease-in-out;
  }

  .product-card-wrapper:hover .shape--blob {
    clip-path: polygon(var(--shape--blob-5));
  }

  .grid__item:nth-child(2n) .product-card-wrapper:hover .shape--blob {
    clip-path: polygon(var(--shape--blob-6));
  }

  .grid__item:nth-child(3n) .product-card-wrapper:hover .shape--blob {
    clip-path: polygon(var(--shape--blob-1));
  }

  .grid__item:nth-child(4n) .product-card-wrapper:hover .shape--blob {
    clip-path: polygon(var(--shape--blob-2));
  }

  .grid__item:nth-child(5n) .product-card-wrapper:hover .shape--blob {
    clip-path: polygon(var(--shape--blob-3));
  }

  .grid__item:nth-child(7n) .product-card-wrapper:hover .shape--blob {
    clip-path: polygon(var(--shape--blob-4));
  }

  .grid__item:nth-child(8n) .product-card-wrapper:hover .shape--blob {
    clip-path: polygon(var(--shape--blob-5));
  }
}
